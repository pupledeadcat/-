{%  load static %}
<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<head>
    <title>养老系统</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Fonts -->
    <link href="http://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,900" rel="stylesheet" type="text/css">
     <!-- CSS Libs -->
    <link href="{%  static 'lib/css/bootstrap.min.css'%}" rel="stylesheet">
    <link href="{%  static 'lib/css/font-awesome.min.css'%}" rel="stylesheet">
    <link href="{% static 'lib/css/animate.min.css'%}" rel="stylesheet">
    <link href="{% static 'lib/css/bootstrap-switch.min.css'%}" rel="stylesheet">
    <link href="{% static 'lib/css/checkbox3.min.css'%}" rel="stylesheet">
    <link href="{% static 'lib/css/jquery.dataTables.min.css'%}" rel="stylesheet">
    <link href="{% static 'lib/css/dataTables.bootstrap.css'%}" rel="stylesheet">
    <link href="{% static 'lib/css/select2.min.css'%}" rel="stylesheet">
    <!-- CSS App -->
     <link href="{% static 'css/style.css'%}" rel="stylesheet">
    <link href="{% static 'css/themes/flat-blue.css'%}" rel="stylesheet">
</head>

<body class="flat-blue">
    <div class="app-container">
        <div class="row content-container">
            <nav class="navbar navbar-default navbar-fixed-top navbar-top">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button type="button" class="navbar-expand-toggle">
                            <i class="fa fa-bars icon"></i>
                        </button>
                        <ol class="breadcrumb navbar-breadcrumb">
                            <li class="active">老人信息管理</li>
							<li class="active">查看/管理老人信息</li>
							<li class="active">老人年龄统计图</li>
                        </ol>
                        <button type="button" class="navbar-right-expand-toggle pull-right visible-xs">
                            <i class="fa fa-th icon"></i>
                        </button>
                    </div>
                    <ul class="nav navbar-nav navbar-right">
                        <li class="dropdown profile">
                            <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">{{ name }}<span class="caret"></span></a>
                            <ul class="dropdown-menu animated fadeInDown">
                                <li>
                                    <div>
                                        <h4 class="username">{{ name }}</h4>
										<p>系统管理员</p>
                                        <div class="btn-group margin-bottom-2x" role="group">
                                            <a href="/"><button type="button" class="btn btn-default"><i class="fa fa-sign-out"></i>注销</button></a>
                                      </div>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </nav>
            <div class="side-menu sidebar-inverse">
                <nav class="navbar navbar-default" role="navigation">
                    <div class="side-menu-container">
                        <div class="navbar-header">
                            <a class="navbar-brand">
                                <div class="icon fa fa-paper-plane"></div>
                                <div class="title">养老系统</div>
                            </a>
                            <button type="button" class="navbar-expand-toggle pull-right visible-xs">
                                <i class="fa fa-times icon"></i>
                            </button>
                        </div>
                        <ul class="nav navbar-nav">
                            <li class="active">
                                <a href="">
                                    <span class="icon fa fa-tachometer"></span><span class="title">主界面</span>
                                </a>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#query-statistics">
                                    <span class="icon fa fa-gears"></span><span class="title">个人信息</span>
                                </a>
                                <!-- Dropdown level 1 -->
                                <div id="query-statistics" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li><a href="personal"> <h3>维护信息</h3></a>
                                            </li>

                                            <li><a href="updatepassword"> <h3>修改密码</h3></a>
                                            </li>
                                           
                                        </ul>
                                    </div>
                                </div>
                            </li>
                             <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#contract-information-management1">
                                    <span class="icon fa fa-file"></span><span class="title">老人信息管理</span>
                                </a>
                                <!-- Dropdown level 1 -->
                                <div id="contract-information-management1" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li><a href="add_old"><h3>新增老人信息</h3></a>
                                            </li>

                                            <li><a href=""><h3>查看/管理老人信息</h3></a>
                                            </li>
                                           
                                        </ul>
                                    </div>
                                </div>
                            </li>

							<li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#client-information-management">
                                    <span class="icon fa fa-file"></span><span class="title">工作人员信息管理</span>
                                </a>
                                <!-- Dropdown level 1 -->
                                <div id="client-information-management" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li><a href=""><h3>新增工作人员信息</h3></a>
                                            </li>
                                            <li><a href=""><h3>查看/管理工作人员信息</h3></a>
                                            </li>

                                        </ul>
                                    </div>
                                </div>
                            </li>
							 <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#contract-information-management1">
                                    <span class="icon fa fa-file"></span><span class="title">义工信息管理</span>
                                </a>
                                <!-- Dropdown level 1 -->
                                <div id="contract-information-management1" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li><a href=""><h3>新增义工信息</h3></a>
                                            </li>

                                            <li><a href=""><h3>查看/管理义工信息</h3></a>
                                            </li>
                                           
                                        </ul>
                                    </div>
                                </div>
                            </li>

                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#contract-information-management1">
                                    <span class="icon fa fa-calculator"></span><span class="title">数据管理</span>
                                </a>
                                <!-- Dropdown level 1 -->
                                <div id="contract-information-management1" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li><a href=""><h3>不确定</h3></a>
                                            </li>

                                         
                                           
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#contract-information-management1">
                                    <span class="icon fa fa-eye"></span><span class="title">摄像头管理</span>
                                </a>
                                <!-- Dropdown level 1 -->
                                <div id="contract-information-management1" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li><a href=""><h3>不确定</h3></a>
                                            </li>
   
                                        </ul>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <!-- /.navbar-collapse -->
                </nav>
            </div>
            <!-- Main Content -->
		<div class="container-fluid">
                <div class="side-body">

					<div class="page-title">
                        <span class="title">老人年龄统计图</span>
                    </div>

					<div class="row">
                        <div class="col-xs-12">
                            <div class="card">


							    <div class="card-header">
                                    <div class="card-title">
                                        <div class="title">老人年龄统计图</div>
                                    </div>
                                </div>

                                <div class="card-body">
                                    <canvas id="a_canvas" width="1000" height="700"></canvas>
									<script>
										(function (){
									 
											window.addEventListener("load", function(){
												
												//获取老人信息
											  var data = [1,3,2,1];
											  var xinforma = ['六十岁以下','六十岁-七十岁','七十岁-八十岁','八十岁以上'];
									 
											  // 获取上下文
											  var a_canvas = document.getElementById('a_canvas');
											  var context = a_canvas.getContext("2d");
											  context.font = "20pt Calibri";
									 
									 
											  // 绘制背景
											  var gradient = context.createLinearGradient(0,0,0,300);
									 
									 
											  context.fillStyle = gradient;
									 
											  context.fillRect(0,0,a_canvas.width,a_canvas.height);
									 
											  var realheight = a_canvas.height-50;
											  var realwidth = a_canvas.width-60;
											  // 描绘边框
											  var grid_cols = data.length + 1;
											  var grid_rows = 4;
											  var cell_height = realheight / grid_rows;
											  var cell_width = realwidth / grid_cols;
											  context.lineWidth = 1;
											  context.strokeStyle = "#a0a0a0";
									 
											  // 结束边框描绘
											  context.beginPath();
											  // 准备画横线
											  /*for(var row = 1; row <= grid_rows; row++){
												var y = row * cell_height;
												context.moveTo(0,y);
												context.lineTo(a_canvas.width, y);
											  }*/
											  
												//划横线
												context.moveTo(0,realheight);
												context.lineTo(realwidth,realheight);
													
												 
												//画竖线
											  context.moveTo(0,20);
											   context.lineTo(0,realheight);
											  context.lineWidth = 3;
											  context.strokeStyle = "black";
											  context.stroke();
												  
									 
											  var max_v =0;
											  
											  for(var i = 0; i<data.length; i++){
												if (data[i] > max_v) { max_v =data[i]};
											  }
											  max_v = max_v * 1.1;
											  // 将数据换算为坐标
											  var points = [];
											  for( var i=0; i < data.length; i++){
												var v= data[i];
												var px = cell_width *　(i +1);
												var py = realheight - realheight*(v / max_v);
												//alert(py);
												points.push({"x":px,"y":py});
											  }
									 
											  //绘制坐标图形
											  for(var i in points){
												var p = points[i];
												context.beginPath();
												context.fillStyle="#7FFFD4";
												context.fillRect(p.x,p.y,50,realheight-p.y);
												 
												context.fill();
											  }
											  //添加文字
											  for(var i in points)
											  {  var p = points[i];
												context.beginPath();
												context.fillStyle="black";
												context.fillText(data[i], p.x + 15, p.y - 15);
												context.fillText(xinforma[i],p.x - 50,realheight+30);
												context.fillText('年龄',realwidth,realheight+12);
												context.fillText('人数',0,50);
												
												  }
											},false);
										  })();
										   
									</script>
                                </div>

                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
        <footer class="app-footer">
            <div class="wrapper"> <span class="pull-right">回到顶部 <a href="#"><i class="fa fa-long-arrow-up"></i></a></span> © 2019 Copyright  by 及振卿小组
            </div>
        </footer>

	</div>
	 <!-- Javascript Libs -->
           <script src="{{url_for('static',filename='lib/js/jquery.min.js')}}"></script>
            <script src="{{url_for('static',filename='lib/js/bootstrap.min.js')}}"></script>
            <script src="{{url_for('static',filename='lib/js/Chart.min.js')}}"></script>
            <script src="{{url_for('static',filename='lib/js/bootstrap-switch.min.js')}}"></script>

            <script src="{{url_for('static',filename='lib/js/jquery.matchHeight-min.js')}}"></script>
            <script src="{{url_for('static',filename='lib/js/jquery.dataTables.min.js')}}"></script>

            <script src="{{url_for('static',filename='lib/js/dataTables.bootstrap.min.js')}}"></script>
            <script src="{{url_for('static',filename='lib/js/select2.full.min.js')}}"></script>
            <script src="{{url_for('static',filename='lib/js/ace/ace.js')}}"></script>
            <script  src="{{url_for('static',filename='lib/js/ace/mode-html.js')}}"></script>
            <script src="{{url_for('static',filename='lib/js/ace/theme-github.js')}}"></script>
            <!-- Javascript -->
            <script src="{{url_for('static',filename='lib/js/app.js')}}"></script>
            <script src="{{url_for('static',filename='lib/js/index.js')}}"></script>


</body>

</html>